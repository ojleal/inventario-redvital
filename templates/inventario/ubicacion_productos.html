{% include 'header.html' %}

<div class="form-group container">
    <form method="POST" action="/agregar_ubicacion" enctype="multipart/form-data">
        <div class="card">
            <div class="card-header" style="font-weight: bold">Agregar productos a una ubicación</div>
            <div class="card-body">
                <p>
                    <div class="form-group">
                        <input id="txtFecha" class="form-control" type="date" name="txtFecha" placeholder="Fecha:" style="display:inline;width:20%">
                        <input id="txtCodigoProducto" class="form-control" type="text" name="txtCodigoProducto" placeholder="Código del producto" style="display:inline;width:30%">
                        <p style="display:inline;width:20%; font-weight: bold">
                            Ubicación del producto: <SELECT class="form-select" name="ubicacionProducto" id="ubicacionProducto" aria-label="Ubicación del producto:" style="display:inline;width:30%" onchange="changeOption">
                                {% for j in ubicacion %}
                                <OPTION value={{j[0]}}>{{j[1]}}</OPTION>
                                {% endfor %}
                            </SELECT>
                        </p>
                    <hr>
                        <input id="txtCodUbica" class="form-control" type="text" name="txtCodUbica" placeholder="Código de la ubicación" style="display:inline;width:20%" disabled>
                        <input id="txtNomUbica" class="form-control" type="text" name="txtNomUbica" placeholder="Ubicación" style="display:inline;width:30%" disabled>
                        <p style="display:inline;width:20%; font-weight: bold">
                            Responsable: <SELECT class="form-select" name="responsable" id="responsable" aria-label="Responsable de la ubicación:" style="display:inline;width:30%" onchange="">
                                {% for j in responsable %}
                                <OPTION value={{j[0]}}>{{j[1]}}</OPTION>
                                {% endfor %}
                            </SELECT>
                        </p>
                    </div>
                    <br>
                    <div class="form-group">
                        <input type="submit" class="btn btn-success" value="Agregar ubicación" />
                        <a href="{{url_for('index')}}" class="btn btn-primary">Volver</a>
                    </div>
                    <hr>
                </p>
            </div>
        </div>
    </form>

    <script type="text/javascript">
        function changeOption() {
            var selectBox = document.getElementById("ubicacionProducto");
            var selOpt = selectBox.options[selectBox.selectedIndex].value;
            document.getElementsByName('txtCodUbica')[0].placeholder = selOpt;
            document.getElementsByName('txtNomUbica')[1].placeholder = selOpt;
            return false;
        }
    </script>
</div>

<div class="container table-responsive">
    <table class="table table-light">
        <thead class="thead-light">
            <tr>
                <th>Código del producto</th>
                <th>Fecha</th>
                <th>Descripción</th>
                <th>Ubicación</th>
                <th>Responsable</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for ubicacion_producto in ubicacion_producto %}
            <tr>
                <td>{{ ubicacion_producto[0] }}</td>
                <td>{{ ubicacion_producto[1] }}</td>
                <td>{{ ubicacion_producto[2] }}</td>
                <td>{{ ubicacion_producto[4] }}</td>
                <td>{{ ubicacion_producto[5] }}</td>
                <td>
                    <a onclick="confirm('Está seguro de eliminar el registro?')" href="/borrado/{{ ubicacion_producto[0],ubicacion_producto[2] }}"><i class="fa-solid fa-circle-minus fa-xl fa-fade"></i></a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% include 'footer.html' %}